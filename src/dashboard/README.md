# Dashboard Module

This directory contains **two complementary dashboards** used for analysing and visualising model behaviour, refusal rates, regard scores, toxicity, and human annotation comparisons within the `xc3-bias-mitigation-llm` project.

Both dashboards are **active**, serving different purposes:

- **`bias-frontend` (React/Next.js)** â†’ Modern, interactive dashboard for deep analysis  
- **`frontend` (Static HTML/CSS/JS)** â†’ Lightweight, fast-loading dashboard for quick demonstrations and simpler visual outputs

---

# ğŸ“ Directory Structure

```
src/dashboard/
â”œâ”€â”€ README.md                   # This file
â”‚
â”œâ”€â”€ bias-frontend/              # Main interactive dashboard (Next.js)
â”‚   â”œâ”€â”€ app/                    # Application routing & pages
â”‚   â”œâ”€â”€ components/             # Reusable React components
â”‚   â”œâ”€â”€ lib/                    # Utility functions (e.g., data loaders, helpers)
â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ human_annotations.json
â”‚   â”œâ”€â”€ styles/                 # Global CSS (Tailwind/PostCSS if used)
â”‚   â”œâ”€â”€ package.json            # Node dependencies
â”‚   â”œâ”€â”€ next.config.mjs         # Next.js configuration
â”‚   â”œâ”€â”€ tsconfig.json           # TypeScript configuration
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ frontend/                   # Static legacy dashboard (still active)
    â”œâ”€â”€ toxicity_visualization.html
    â”œâ”€â”€ css/
    â”‚   â””â”€â”€ styles.css
    â””â”€â”€ js/
        â””â”€â”€ script.js
```

---

# ğŸ”µ 1. `bias-frontend` â€” Main React/Next.js Dashboard

This is the **primary** interactive dashboard for the project.

### âœ… Features  
- Interactive charts visualising:
  - refusal rates  
  - regard distributions  
  - model Ã— condition comparisons  
  - human annotation comparisons  
- Clean and modular React component structure  
- Extensible for future research or client demos  

### ğŸ“„ Data Inputs

The dashboard reads from:

```
src/dashboard/bias-frontend/public/data/human_annotations.json
```

Future additions may include:

```
data/processed/bias_metrics_summary.json
data/processed/bias_metrics_with_preds.json
```

To ensure reproducibility, all data files should be placed in:

```
bias-frontend/public/data/
```

### â–¶ How to Run (Development)

From the project root:

```bash
cd src/dashboard/bias-frontend
npm install           # or pnpm install
npm run dev           # or pnpm dev
```

Then open:

```
http://localhost:3000
```

### â–¶ How to Build for Production

```bash
npm run build
npm start
```

---

# ğŸŸ¡ 2. `frontend` â€” Static Dashboard (Active Legacy Version)

This dashboard provides a **simple static visualisation** without needing Node.js or a local server.

### Contents
- `toxicity_visualization.html`  
- Custom CSS and JS assets  
- Ready to open in any browser  
- Useful for:
  - lightweight demos  
  - offline viewing  
  - simple institutional deployment  
  - poster/expo screens where interactive dashboards are unnecessary  

### â–¶ How to Run

Simply open:

```
src/dashboard/frontend/toxicity_visualization.html
```

in any browser (Chrome, Edge, Firefox, etc.).

---

# ğŸ”— Pipeline Integration

Both dashboards rely on outputs generated by:

- `src/lbm/prepare_wp1_gui_json.py`
- `src/notebooks/ml_model_bias.ipynb`
- `src/lbm/bias_metrics.py`

### Typical data flow:

```
WP1 raw â†’ prepare_wp1_gui_json.py
         â†’ data/interim/wp1_prompts_prepared.json
         â†’ ml_model_bias.ipynb (DistilBERT)
         â†’ data/processed/bias_metrics_with_preds.json
         â†’ bias_metrics.py
         â†’ data/processed/bias_metrics_summary.json
         â†’ dashboards (visualisation)
```

---

# ğŸ§© When to Use Each Dashboard

| Dashboard | Best For | Strengths | Limitations |
|----------|-----------|-----------|-------------|
| **bias-frontend (Next.js)** | Deep analysis, client demos, interactive exploration | Fast, modular, interactive, scalable | Requires Node.js |
| **frontend (Static HTML)** | Quick previews, expo demos, offline usage | No dependencies, instant loading | Less interactive, less complex charts |

Both dashboards are **kept active** so contributors and stakeholders can choose based on context.

---

# ğŸ“ Developer Notes

- Keep all data files **within `public/data/`** for Next.js compatibility.
- Name new React components using consistent conventions (`PascalCase.tsx`).
- Avoid large or sensitive files inside dashboard folders.
- When adding new visualisations:
  - Update this README  
  - Add example screenshots (optional but helpful)
  - Use relative imports for portability  

---

# ğŸš€ Future Extensions

Planned improvements:

- Add live loading of `bias_metrics_summary.json`  
- Add filters for identity, model, and condition  
- Add toxicity overlays using `toxicity.py`  
- Add side-by-side model comparison panels  
- Add result export (PNG, CSV, PDF)  

---

# ğŸ¤ Contributions

New components, visualisations, and analysis tools are welcome.  
Please follow:

- consistent code style  
- functional React components  
- modular chart organisation  
- PR descriptions documenting new visualisations  
